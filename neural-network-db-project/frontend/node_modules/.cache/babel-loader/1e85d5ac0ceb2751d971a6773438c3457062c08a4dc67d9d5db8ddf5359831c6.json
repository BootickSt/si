{"ast":null,"code":"const API_BASE_URL = 'http://localhost:8000';\nexport const login = async (email, password) => {\n  const response = await fetch(`${API_BASE_URL}/login`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.detail || 'Login failed');\n  }\n  return response.json();\n};\nexport const register = async (email, password) => {\n  const response = await fetch(`${API_BASE_URL}/register`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.detail || 'Registration failed');\n  }\n  return response.json();\n};\nexport const getCurrentUser = async () => {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    throw new Error('No token found');\n  }\n  const response = await fetch(`${API_BASE_URL}/me`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    }\n  });\n  if (!response.ok) {\n    if (response.status === 401) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('userRole');\n    }\n    throw new Error('Failed to get user info');\n  }\n  return response.json();\n};\nexport const fetchWithAuth = async (url, options = {}) => {\n  const token = localStorage.getItem('token');\n  const headers = {\n    'Content-Type': 'application/json',\n    ...options.headers\n  };\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  const response = await fetch(url, {\n    ...options,\n    headers\n  });\n  if (response.status === 401) {\n    localStorage.removeItem('token');\n    localStorage.removeItem('userRole');\n    window.location.href = '/login';\n  }\n  return response;\n};","map":{"version":3,"names":["API_BASE_URL","login","email","password","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","catch","Error","detail","register","getCurrentUser","token","localStorage","getItem","status","removeItem","fetchWithAuth","url","options","window","location","href"],"sources":["/home/vladislave/Документы/otd /5/neural-network-db-project/frontend/src/services/authApi.js"],"sourcesContent":["const API_BASE_URL = 'http://localhost:8000';\n\nexport const login = async (email, password) => {\n  const response = await fetch(`${API_BASE_URL}/login`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ email, password }),\n  });\n  \n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.detail || 'Login failed');\n  }\n  \n  return response.json();\n};\n\nexport const register = async (email, password) => {\n  const response = await fetch(`${API_BASE_URL}/register`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ email, password }),\n  });\n  \n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.detail || 'Registration failed');\n  }\n  \n  return response.json();\n};\n\nexport const getCurrentUser = async () => {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    throw new Error('No token found');\n  }\n  \n  const response = await fetch(`${API_BASE_URL}/me`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n  });\n  \n  if (!response.ok) {\n    if (response.status === 401) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('userRole');\n    }\n    throw new Error('Failed to get user info');\n  }\n  \n  return response.json();\n};\n\nexport const fetchWithAuth = async (url, options = {}) => {\n  const token = localStorage.getItem('token');\n  \n  const headers = {\n    'Content-Type': 'application/json',\n    ...options.headers,\n  };\n  \n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  \n  const response = await fetch(url, {\n    ...options,\n    headers,\n  });\n  \n  if (response.status === 401) {\n    localStorage.removeItem('token');\n    localStorage.removeItem('userRole');\n    window.location.href = '/login';\n  }\n  \n  return response;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}